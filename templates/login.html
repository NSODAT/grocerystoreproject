{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h2>Login</h2>
    <form method="POST" action="{{ url_for('login') }}" class="needs-validation" novalidate>
        {{ form.hidden_tag() }}
        <div class="form-group">
            <label for="username">{{ form.username.label }}</label>
            {{ form.username(class="form-control", size=32, required=true) }}
            <div class="invalid-feedback">
                Please enter your username.
            </div>
        </div>
        <div class="form-group">
            <label for="password">{{ form.password.label }}</label>
            <div class="input-group">
                {{ form.password(class="form-control", size=32, required=true) }}
                <div class="input-group-append">
                    <span class="input-group-text toggle-password" onclick="togglePassword('password', 'password-icon')">
                        <i id="password-icon" class="fas fa-eye-slash"></i>
                    </span>
                </div>
            </div>
            <div class="invalid-feedback">
                Please enter your password.
            </div>
        </div>
        <button type="submit" class="btn btn-primary">Login</button>
        <button type="button" class="btn btn-link" data-toggle="modal" data-target="#registerModal">Register</button>
    </form>
</div>

<!-- Register Modal -->
<div class="modal fade" id="registerModal" tabindex="-1" role="dialog" aria-labelledby="registerModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="registerModalLabel">Register</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <!-- Registration Form -->
                <form method="POST" action="{{ url_for('register') }}">
                    {{ form.hidden_tag() }}
                    <div class="form-group">
                        <label for="register-username">Username</label>
                        <input type="text" class="form-control" id="register-username" name="username" required>
                    </div>
                    <div class="form-group">
                        <label for="register-password">Password</label>
                        <div class="input-group">
                            <input type="password" class="form-control" id="register-password" name="password" required>
                            <div class="input-group-append">
                                <span class="input-group-text toggle-password" onclick="togglePassword('register-password', 'register-password-icon')">
                                    <i id="register-password-icon" class="fas fa-eye-slash"></i>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="confirm-password">Confirm Password</label>
                        <div class="input-group">
                            <input type="password" class="form-control" id="confirm-password" name="confirm_password" required>
                            <div class="input-group-append">
                                <span class="input-group-text toggle-password" onclick="togglePassword('confirm-password', 'confirm-password-icon')">
                                    <i id="confirm-password-icon" class="fas fa-eye-slash"></i>
                                </span>
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Register</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    function togglePassword(inputId, iconId) {
        var passwordInput = document.getElementById(inputId);
        var passwordIcon = document.getElementById(iconId);

        if (passwordInput.type === "password") {
            passwordInput.type = "text";
            passwordIcon.classList.remove("fa-eye-slash");
            passwordIcon.classList.add("fa-eye");
        } else {
            passwordInput.type = "password";
            passwordIcon.classList.remove("fa-eye");
            passwordIcon.classList.add("fa-eye-slash");
        }
    }
</script>
{% endblock %}












